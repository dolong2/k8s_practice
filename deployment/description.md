## 디플로이먼트는 어떻게 관리해야할 리소스를 추적하는가
이런 패턴은 쿠버네티스 전반에서 매우 많이 사용된다.

쿠버네티스의 모든 리소스는 간단한 키-값 쌍 형태의 레이블을 가지며, 이 레이블을 우리가 원하는 데이터를 담는데 사용할 수 있다.

예를 들어 디플로이먼트에 release라는 레이블을 추가하고, 그 값을 20.04라고 지정한다면, 우리는 나중에 해당 디플로이먼트가 20.24 버전에 배포된 것임을 알 수 있다. 또한 레이블은 디플로이먼트와 파드의 관계처럼 객체간 관계를 표현해서 리소스와 리소스의 느슨한 연결을 만드는 역할도 수행할 수 있다.

디플로이먼트는 탬플릿을 적용해서 파드를 생성하는데, 이 템플릿 일부는 메타데이터 필드로 레이블(labels)를 포함한다.

디플로이먼트를 상세조회해서 나온 app이라는 레이블과 이름이 일치하는 파드를 찾으면 해당 디플로이먼트가 관리하는 파드를 찾을 수 있다.

리소스는 생애 주기를 거치며 생성이나, 수정, 삭제와 함꼐 레이블을 부여받는다. 또한, 컨트롤러 객체는 레이블 셀렉터를 통해 자신이 관리하는 리소스인지 판단한다.

컨트롤러가 자신이 관리하는 리소스 목록을 직접 유지하지 않아도, 레이블 셀렉터가 컨트롤러 객체의 정의에 포함되어 있기때문에 컨트롤러 객체가 언제라도 쿠버네티스 API를 통해서 자신이 관장하는 리소스를 찾아볼 수 있다. 이러한 점 때문에 레이블 정보를 함보를 함부로 직접 수정하면 이런 리소스 관계를 흐트러트릴 수 있어서 주의해야한다.
